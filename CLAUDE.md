# 介護申し送り翻訳＆アシスタントアプリ - エンジニア向け引継ぎ資料

## 📋 プロジェクト概要

本プロジェクトは、介護現場の申し送り内容を外国人介護スタッフにもわかりやすく翻訳・変換するWebアプリケーションです。

### 主な機能

- **申し送り翻訳**: 日本語の介護申し送り内容を複数の形式で出力
  - 原文表示
  - ふりがな付き日本語
  - やさしい日本語
  - 指定言語への翻訳
- **申し送り記録作成**: 構造化された申し送り記録の自動生成
- **プロンプト設定**: AIへの指示をブラウザから編集・保存可能

## 🏗️ 技術スタック

### バックエンド

- **Node.js** (v18以上推奨)
- **Express.js** (v4.19.2)
- **Google Generative AI** (v0.11.3) - Gemini 2.0 Flash Exp モデル使用
- **dotenv** (v16.4.5) - 環境変数管理

### フロントエンド

- **HTML5** + **CSS3** + **JavaScript (ES6+)**
- **Tailwind CSS** (CDN版)
- **Noto Sans JP** フォント
- **Responsive Design**

## 📁 プロジェクト構造

```text
kaigo_takeover/
├── server.js              # Expressサーバー（メインファイル）
├── package.json           # 依存関係とスクリプト
├── .env                   # 環境変数（APIキー等）
├── index.html             # メインページ
├── Script.js              # フロントエンドロジック
├── style.css              # カスタムスタイル
├── animation_q100.webp    # アバター画像
├── prompt.md              # 翻訳用システムプロンプト
├── prompt-record.md       # 記録作成用システムプロンプト
├── README.md              # 使用方法
└── node_modules/          # 依存パッケージ
```

## 🔧 セットアップ手順

### 1. 環境準備

```bash
# リポジトリをクローンまたはダウンロード
cd kaigo_takeover

# 依存パッケージのインストール
npm install
```

### 2. 環境変数設定

`.env`ファイルを作成し、以下の内容を記載：

```env
GEMINI_API_KEY=your_actual_gemini_api_key_here
PORT=3000
```

### 3. サーバー起動

```bash
npm start
```

### 4. アクセス

ブラウザで `http://localhost:3000` にアクセス

## 🔍 主要コンポーネント解説

### サーバーサイド（server.js）

#### APIエンドポイント

1. **POST /api/translate** - 翻訳機能
   - 入力: `originalText`, `targetLanguage`, `systemPrompt`
   - 出力: JSON形式の翻訳結果

2. **POST /api/create-record** - 記録作成機能
   - 入力: `originalText`, `targetLanguage`, `date`, `creator`, `receiver`
   - 出力: 構造化された申し送り記録

#### セキュリティ対策

- APIキーはサーバーサイドで管理
- 入力パラメータのバリデーション
- エラーハンドリング

### フロントエンド（index.html + Script.js）

#### 主要機能

1. **翻訳フォーム**
   - テキスト入力エリア
   - 言語選択（ベトナム語、英語、インドネシア語、中国語）
   - 翻訳実行ボタン

2. **記録作成フォーム**
   - 日付入力
   - 作成者・引継ぎ手入力
   - 記録生成ボタン

3. **結果表示**
   - 4つの出力形式を並列表示
   - コピー機能付き

4. **プロンプト設定**
   - モーダルウィンドウでのプロンプト編集
   - ローカルストレージでの保存

## 🎯 開発・保守のポイント

### 重要な設定ファイル

- **prompt.md**: 翻訳用システムプロンプト
- **prompt-record.md**: 記録作成用システムプロンプト

### エラーハンドリング

- APIキー未設定時の起動停止
- 翻訳失敗時のユーザーフレンドリーなエラー表示
- JSON解析エラーの処理

### パフォーマンス最適化

- 静的ファイル配信（Express.static）
- CDN経由でのTailwind CSS読み込み
- 適切なHTTPステータスコード返却

## 🔄 運用・更新時の注意事項

### 1. APIキー管理

- `.env`ファイルは**絶対に**リポジトリにコミットしない
- 本番環境では環境変数で管理

### 2. プロンプト更新

- `prompt.md`と`prompt-record.md`の変更はサーバー再起動が必要
- プロンプト変更後は十分なテストを実施

### 3. 依存パッケージ更新

```bash
# セキュリティアップデートの確認
npm audit

# パッケージ更新
npm update
```

### 4. ログ監視

- サーバーログの定期確認
- API使用量の監視（Gemini APIの制限に注意）

## 🧪 テスト方法

### 動作確認項目

1. **翻訳機能**
   - 各言語への翻訳が正常に動作するか
   - エラーハンドリングが適切に動作するか

2. **記録作成機能**
   - 入力フィールドの検証
   - 生成された記録の構造確認

3. **プロンプト設定**
   - 保存・読み込み機能
   - モーダルの開閉動作

### 簡単な動作テスト

```bash
# サーバー起動
npm start

# ブラウザで確認すべき項目
# - アプリケーションが正常に表示される
# - 翻訳機能が動作する
# - 記録作成機能が動作する
# - プロンプト設定が保存される
```

## 🚀 今後の拡張可能性

### 機能追加の候補

1. **多言語UI対応**
2. **音声入力機能**
3. **PDF出力機能**
4. **データベース連携**
5. **ユーザー管理機能**

### 技術的改善点

1. **TypeScript導入**
2. **テストフレームワーク導入**
3. **ビルドプロセス最適化**
4. **Docker化**

## 📞 サポート・問い合わせ

このプロジェクトに関する質問や問題がある場合は、以下を確認してください：

1. **ログファイルの確認**
2. **API使用量の確認**
3. **環境変数の設定確認**
4. **依存パッケージのバージョン確認**

---

**注意**: このアプリケーションは介護現場の業務効率化を目的とした防御的なツールです。適切なセキュリティ対策を講じて運用してください。